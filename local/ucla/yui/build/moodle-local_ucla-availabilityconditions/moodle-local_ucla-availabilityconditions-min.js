YUI.add("moodle-local_ucla-availabilityconditions",function(e,t){function n(){n.superclass.constructor.apply(this,arguments)}var r={CLOSEBUTTON:".closebutton",CLICKABLELINKS:"span.availabilitypopup > a",FOOTER:"div.moodle-dialogue-ft"};n.NAME="moodle-local_ucla-availabilityconditions",e.extend(n,e.Base,{tooltip:null,initializer:function(){e.one("body").delegate("click",this.display_panel,r.CLICKABLELINKS,this)},display_panel:function(t){this.tooltip||(this.tooltip=new M.core.tooltip);var n,i;t.preventDefault(),this.tooltip.cancel_events(),n=t.target.ancestor("a",!0),this.tooltip.setAttrs({headerContent:"Access restrictions",bodyContent:n.ancestor("span.availabilitypopup").getData("availabilityconditions"),footerContent:null}),this.tooltip.show(t),this.tooltip.align(n,this.tooltip.alignpoints),i=this.tooltip.bb.delegate("click",this.tooltip.close_panel,r.CLOSEBUTTON,this.tooltip),this.tooltip.listenevents.push(i),i=e.one("body").on("key",this.tooltip.close_panel,"esc",this.tooltip),this.tooltip.listenevents.push(i),i=this.tooltip.bb.on("mousedownoutside",this.tooltip.close_panel,this.tooltip),this.tooltip.listenevents.push(i)}}),M.local_ucla=M.local_ucla||{},M.local_ucla.availabilityconditions=M.local_ucla.availabilityconditions||null,M.local_ucla.init_availabilityconditions=M.local_ucla.init_availabilityconditions||function(e){return M.local_ucla.availabilityconditions||(M.local_ucla.availabilityconditions=new n(e)),M.local_ucla.availabilityconditions}},"@VERSION@",{requires:["moodle-core-tooltip"]});
