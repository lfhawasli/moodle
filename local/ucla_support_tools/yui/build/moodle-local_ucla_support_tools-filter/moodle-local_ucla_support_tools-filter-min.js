YUI.add("moodle-local_ucla_support_tools-filter",function(e,t){M.local_ucla_support_tools=M.local_ucla_support_tools||{},M.local_ucla_support_tools.filter={tools:function(t){var n=e.one("#cat-grid").getDOMNode(),r,i=[],s=e.Base.create("pieFilter",e.Base,[e.AutoCompleteBase],{initializer:function(){this._bindUIACBase(),this._syncUIACBase()}}),o=new s({inputNode:t.input_node_id,minQueryLength:0,queryDelay:0,source:function(){var s=[];return i.length?(e.all(t.category_nodes).each(function(e){e.ancestor("li").remove(!1)}),e.all(i).each(function(t){var r=e.Node.create("<li/>").append(t);salvattore.append_elements(n,[r.getDOMNode()])}),r=Math.ceil(i.length/e.one("#cat-grid").getData("columns")),i=[]):r=e.one(".column").get("children").size(),e.all(t.target_nodes).each(function(e){s.push({node:e,tags:e.getAttribute("data-keywords")})}),s},resultTextLocator:"tags",resultFilters:"phraseMatch"});o.on("results",function(s){if(s.query){e.all(t.filter_nodes).addClass("hidden"),e.Array.each(s.results,function(e){var t=e.raw.node;t.ancestor("li").removeClass("hidden")});var o=[];for(var u=0;u<r;u++)i.push([]),o.push([]);e.all(".column").each(function(t){if(t.get("children").size()<r){var n=e.Node.create("<li/>");e.Node.create("<div/>").addClass("ucla-support-category filler-category").appendTo(n),t.append(n)}}),e.all(t.category_nodes).each(function(t,n){var u=n%r;t.hasClass("filler-category")||i[u].push(t),t.ancestor("li").remove(!1),e.Array.each(s.results,function(e){var n=e.raw.node,r=n.ancestor(".ucla-support-category");r&&r===t&&o[u].push(t)})}),i=e.Array.flatten(i),o=e.Array.flatten(o),o=e.Array.filter(o,function(e){return!e.hasClass("filler-category")}),o=e.Array.unique(o),e.Array.each(o,function(e){salvattore.append_elements(n,[e.ancestor("li").getDOMNode()])})}else e.all(t.filter_nodes).removeClass("hidden")})},categories:function(){e.one(".ucla-support-tool-category-labels").delegate("change",function(t){var n=t.target,r=e.one('.ucla-support-category[data-id="'+n.getData("id")+'"]');n.get("checked")?(r.ancestor("li").removeClass("collapsed"),n.ancestor(".category-label").removeClass("selected"),n.previous("label").one("i").replaceClass("fa-toggle-off","fa-toggle-on")):(r.ancestor("li").addClass("collapsed"),n.ancestor(".category-label").addClass("selected"),n.previous("label").one("i").replaceClass("fa-toggle-on","fa-toggle-off"))},'input[type="checkbox"]'),e.one(".ucla-support-tool-alltools").delegate("click",function(t){t.preventDefault(),e.all('.category-label input[type="checkbox"]').each(function(e){e.get("checked")&&e.previous("label").simulate("click")});var n=t.target.getData("catid");e.one('.category-label input[data-id="'+n+'"]').set("checked","false").simulate("change")},'a[data-action="filtercategory"]')}}},"@VERSION@",{requires:["autocomplete-base","autocomplete-filters","node-event-simulate"]});
