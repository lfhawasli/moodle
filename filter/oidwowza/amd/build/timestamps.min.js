define(["jquery","jwplayer"],function(a,b){return{init:function(c,d,e,f,g){var h="player-"+d,i=b(h),j=M.util.get_string("playbackrates","filter_oidwowza"),k=M.util.get_string("rewind","filter_oidwowza");1===g?i.setup({autostart:!0,width:"100%",aspectratio:"3:2",playlist:[{sources:[{file:e},{file:f}]}],primary:"html5",localization:{settings:j,rewind:k}}):i.setup({autostart:!0,image:M.cfg.wwwroot+"/theme/uclashared/pix/ucla-logo.png",sources:[{file:f},{file:e}],rtmp:{bufferlength:3},modes:[{type:"html5"},{type:"flash"}],height:200,localization:{settings:j,rewind:k}});var l=0,m=!1,n=!1,o=!1,p=function(){i.seek(i.getPosition()+10)},q=M.util.get_string("skipahead","filter_oidwowza");i.addButton(M.cfg.wwwroot+"/filter/oidwowza/pix/fast-forward.svg",q,p,"jw-btn-fastforward","jw-fastforward"),i.on("beforePlay",function(){n||(a(".jw-fastforward.jw-icon-inline").insertAfter(".jw-icon-playback"),a(".jw-icon-rewind.jw-icon-inline").insertBefore(".jw-icon-playback"),n=!0)});var r=new URL(window.location).searchParams;r.get("offset")&&(l=r.get("offset"),m=!0),i.on("ready",function(){m===!0&&i.play()}),i.on("firstFrame",function(){i.seek(l)}),g||o||i.on("time",function(){!o&&isFinite(i.getDuration())&&(i.seek(l),o=!0)});var s=function(){var a=parseInt(i.getPosition(),10);a===parseInt(i.getDuration(),10)&&(a="FINISHED"),M.util.set_user_preference(c,a)};setInterval(s,3e4),a(window).on("beforeunload",function(){s()})}}});